<!-- 
CSC337 Final Project,
Ben Lazarines
Shin Toyama
12/05/2018
-->
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>WST</title>
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
</head>
<body onload="showData()">

<!-- header starts -->
<div class="header">
	<h1> <span style="color: #FF4460;"><i class="fas fa-dumbbell"></i></span> Workout Scheduler and Tracker</h1>
	<div id="sibut" onclick="siform()">
		Sign In
	</div>
	<div id="siform" style="display: none;">
		<form onsubmit="signIn();return false">
			<div class="siuLeft">
				Username: <br>
				Password: <br>
			</div>
			<div class="siuRight">
				<input type="text" id="signinUNinput" required /><br>
				<input type="text" id="signinPWinput" required /><br>
			</div>
			<input type="submit" value="Sign In" />
		</form>
	</div>
	<div id="subut" onclick="suform()">
		Sign Up
	</div>
	<div id="suform" style="display: none;">
		<form onsubmit="signUp();return false">
			<div class="siuLeft">
				Username: <br>
				Password: <br>
			</div>
			<div class="siuRight">
				<input type="text" id="signupUNinput" required /><br>
				<input type="text" id="signupPWinput" required /><br>
			</div>
			<input type="submit" value="Sign Up" />
		</form>
	</div>
	<div id="usernamedisplay" style="display: none">Hello, <span id="showusername" style="color: #FF4460;"></span></div>
</div>
<!-- header ends -->

<!-- Menu Starts -->
<div class="sidemenu">
</div>
<!-- Menu ends -->


<br>
<iframe src="leaderboard.html">
</iframe>
<main class="mainContent">

<br><br>

<!-- Workout list starts-->
<center>
<div class="listOfWorkout">
<table cellspacing="0" width="100%"><tbody>
	<tr>
		<th colspan="5" bgcolor="#000">Your Workouts</th>
	</tr>
	<tr>
		<td width="35%">name</td>
		<td width="20%">duration per set (s)</td>
		<td width="20%">hardness</td>
		<td width="15%">place</td>
		<td width="10%">delete</td>
	</tr>
	<tr>
		<td>e.g. Arm Stretch</td>
		<td>30</td>
		<td>Very Light</td>
		<td>Home</td>
		<td><i class="fas fa-trash-alt" onclick="deletewo()"></i></td>
	</tr>
</tbody></table>
<br>
<form onsubmit="addWorkout();return false">
	<table cellspacing="0" width="100%"><tbody>
		<tr>
			<td width="35%"><input type="text" id="WOname" placeholder="workout name" required /></td>
			<td width="20%"><input type="number" id="WOtime" placeholder="time in sec" step="10" min="10" max="360" required /> in sec</td>
			<td width="20%">
				<select id="WOhard" required>
					<option value="">(Select)</option>
					<option value="VL">Very Light</option>
					<option value="LL">Light</option>
					<option value="MM">Moderate</option>
					<option value="HH">Hard</option>
					<option value="VH">Very Hard</option>
				</select>
			</td>
			<td width="15%"><input type="text" id="WOplace" placeholder="place" size="10%" /></td>
			<td width="10%"><input type="submit" class="nbutton" value="Add"/></td>
		</tr>
	</tbody></table>
</form>
</div>
</center>
<!-- Workout list ends -->

<br><br>

<center>
<div class="bottomwrapper">
<!-- Workout menu generator starts -->
<center>
<div class="woGen">
	<center style="font-size: 1.2em;">\ Start Workout /</center>
	<hr>
	<form onsubmit="menuGen();return false">
		Duration? <input type="number" id="WOGtime" placeholder="time in min" step="5" min="5" max="180" required /> in min<br>
		Place? <input type="type" id="WOGplace" placeholder="not required" /><br>
		Hardness? <select id="WOGhard" required>
					<option value="">(Select)</option>
					<option value="VL">Very Light</option>
					<option value="LL">Light</option>
					<option value="MM">Moderate</option>
					<option value="HH">Hard</option>
					<option value="VH">Very Hard</option>
				</select><br>
		Rest between workouts? <input type="number" id="WOGrest" placeholder="rest in sec" step="5" min="5" max="180" required /> in sec<br><br>
				<center><input style="font-size: 1.1em;" type="submit" value="Generate a menu" class="nbutton" /></center>
	</form>
<br>
</div>
</center>


<!-- Workout menu generator ends -->

<!-- Workout tracker starts -->
<center>
<div class="woTr">
	<table cellspacing="0"><tbody>
		<tr>
			<th colspan="5" bgcolor="#ccc">Your Workout History</th>
		</tr>
		<tr>
			<td>Date</td>
			<td>Duration</td>
			<td>Hardness</td>
			<td>Place</td>
			<td></td>
		</tr>
		<tr>
			<td>e.g. 11-20-2018</td>
			<td>30 min</td>
			<td>Very Hard</td>
			<td>Home</td>
			<td><input type="button" onclick="detailShow()" value="Detail" class="nbutton" /></td>
		</tr>
	</tbody></table>
</div>
</center>
<!-- Workout tracker ends -->
</div>
</center>

<!-- footer starts -->
<footer>
	©︎2018 Workout Scheduler and Tracker
</footer>
<!-- footer ends -->


<script type="text/javascript">
	function showWOList() { //read database and show the list of saved workouts
		var ajax = new XMLHttpRequest();
		ajax.open("GET", "controller.php?WOList=", true);
		ajax.send();
		ajax.onreadystatechange = function () {
	        if (ajax.readyState == 4 && ajax.status == 200) {
	        	var WOListArray = JSON.parse(ajax.responseText);
	            //code to show the list
	        }
	    };
	}
	function showWOHistory() { //read database and show the history
		var ajax = new XMLHttpRequest();
		ajax.open("GET", "controller.php?WOHistory=", true);
		ajax.send();
		ajax.onreadystatechange = function () {
	        if (ajax.readyState == 4 && ajax.status == 200) {
	        	var WOHistoryArray = JSON.parse(ajax.responseText);
	            //code to show the history
	        }
	    };
	}

	function showData() { //when the page is loaded
		showWOList();
		showWOHistory();
	}

	var signinbutton = document.getElementById('sibut');
	var signupbutton = document.getElementById('subut');
	var signinform = document.getElementById('siform');
	var signupform = document.getElementById('suform');
	var showMeAfterLogin = document.getElementById('usernamedisplay');
	var showUsername = document.getElementById('showusername');
	function siform() { //show sign-in form
		signinform.style.display = "inline";
		signinbutton.style.display = "none";
		signupbutton.style.display = "none";
	}
	function suform() { //show sign-up form
		signupform.style.display = "inline";
		signinbutton.style.display = "none";
		signupbutton.style.display = "none";
	}
	function signIn() { //check if the user is in database. if yes, let him log in
		var signInUNInput = document.getElementById('signinUNinput');
		var signInPWInput = document.getElementById('signinPWinput');
		var ajax = new XMLHttpRequest();
		ajax.open("GET", "controller.php?signInUN=" + signInUNInput.value + "&signInPW=" + signInPWInput.value, true);
		ajax.send();
		ajax.onreadystatechange = function () {
	        if (ajax.readyState == 4 && ajax.status == 200) {
	        	if (ajax.responseText) { //if the user is in database
	        		signinform.style.display = "none";
					var uname = signInUNInput.value; //get the input username
					showUsername.innerHTML = uname;
					showMeAfterLogin.style.display = "inline";
	        	}
	        	else {
	        		signInUNInput.value = '';
	        		signInPWInput.value = '';
	        		alert('Please enter a valid username or password.');
	        	}
	        }
	    };
	}
	function signUp() { //save the username and password into database, and let him log in 
		var signUpUNInput = document.getElementById('signupUNinput');
		var signUpPWInput = document.getElementById('signupPWinput');
		var ajax = new XMLHttpRequest();
		ajax.open("GET", "controller.php?signUpUN=" + signUpUNInput.value + "&signUpPW=" + signUpPWInput.value, true);
		ajax.send();
		ajax.onreadystatechange = function () {
	        if (ajax.readyState == 4 && ajax.status == 200) {
	        	if (ajax.responseText) { //if the input username is unused
	        		signupform.style.display = "none";
					var uname = signUpUNInput.value; //get the input username
					showUsername.innerHTML = uname;
					showMeAfterLogin.style.display = "inline";
	        	}
	        	else { //if the input username is already used
	        		signUpUNInput.value = '';
	        		signUpPWInput.value = '';
	        		alert('Please use another username');
	        	}
	        }
	    };
	}

	function deletewo() { //if the user press 'OK', delete the workout from database
		if (confirm("Are you sure to delete this workout?")) {
			//write a code here to delete the selected workout from database
		}
	}
	function addWorkout() { //add the workout that the user inputs into database, and then reload the list of workouts
		var WOName = document.getElementById('WOname');
		var WOTime = document.getElementById('WOtime');
		var WOHard = document.getElementById('WOhard');
		var WOPlace = document.getElementById('WOplace');
		//write a code here to add the input workout into database
		showWOList();
	}
	function menuGen() { //generate a menu based on the user's input
		var WOGTime = document.getElementById('WOGtime');
		var WOGPlace = document.getElementById('WOGplace');
		var WOGHard = document.getElementById('WOGhard');
		var WOGRest = document.getElementById('WOGrest');
		//write a code here to generate a menu
	}
	function detailShow() { //show detail of the past workout

	}
</script>

</main>

</body>
</html>